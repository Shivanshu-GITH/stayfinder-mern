<% layout("/layouts/boilerplate") %>

<div class="container mt-5 mb-5">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-semibold">Explore Listings</h2>
  </div>

  <% if (allListings.length === 0) { %>
    <div class="text-center text-muted mt-5">
      <h5>No listings available yet</h5>
      <p>Be the first one to add a place</p>
    </div>
  <% } %>

  <div class="row g-4">

    <% for (let listing of allListings) { %>

      <div class="col-lg-4 col-md-6 col-sm-12">
        <a href="/listings/<%= listing._id %>" class="listing-link">

          <div class="card listing-card h-100">

            <div class="position-relative">
              <img 
                src="<%= listing.image && listing.image.url ? listing.image.url : 'https://images.unsplash.com/photo-1505693416388-ac5ce068fe85' %>" 
                class="card-img-top"
                alt="listing_image"
              />
              <div class="card-img-overlay overlay-effect"></div>
            </div>

            <div class="card-body">
              <h6 class="fw-semibold mb-1">
                <%= listing.title %>
              </h6>

              <p class="text-muted small mb-1">
                <%= listing.location %>, <%= listing.country %>
              </p>

              <p class="fw-semibold mb-0">
                â‚¹ <%= listing.price ? listing.price.toLocaleString("en-IN") : "N/A" %>
                <span class="text-muted fw-normal"> / night</span>
              </p>
            </div>

          </div>

        </a>
      </div>

    <% } %>

  </div>

</div>
